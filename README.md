# <img height="23px" width="23px" src="https://user-images.githubusercontent.com/59307414/161243663-3b7e20ac-a485-4ce0-9b25-6f636d180b0e.png"> Blind Cafe Server

<div align="center">
<img src="https://user-images.githubusercontent.com/59307414/161209758-c93ed073-0c40-479f-ada5-5f417ed4ff83.png" width="300" />
<br>
<a href="https://www.blindcafe.me/" target="_blank">https://www.blindcafe.me</a>
</div>

## ğŸ“„ í”„ë¡œì íŠ¸ ê°œìš”
| êµ¬ë¶„ |ë‚´ìš©|
|:------:|-------|
| ê¸°ê°„ |2021.09. ~ 2021.12.|
| êµ¬ì„± |Planner 1ëª…, Designer 1ëª…, Backend 1ëª…, Frontend(AOS, iOS) 2ëª…<br>ä¸­ **Backend** ì°¸ì—¬|
| ì†Œê°œ |ìƒëŒ€ë°©ì˜ ì •ë³´ë¥¼ ì•Œì§€ ëª»í•œ ì±„ ê´€ì‹¬ì‚¬ë¥¼ ë°”íƒ•ìœ¼ë¡œ<br>ë§¤ì¹­ëœ ìƒëŒ€ë°©ê³¼ 3ì¼ê°„ ì±„íŒ…ì„ ì§„í–‰í•˜ëŠ” ë°ì´íŠ¸ ë§¤ì¹­ ì• í”Œë¦¬ì¼€ì´ì…˜|

<br>

## ğŸ’¼ í”„ë¡œì íŠ¸ ì†Œê°œ
- ê´€ì‹¬ì‚¬ê°€ ë¹„ìŠ·í•œ ì‚¬ëŒê³¼ 3ì¼ê°„ ëŒ€í™”í•  ìˆ˜ ìˆëŠ” ì†Œì…œ ì–´í”Œì…ë‹ˆë‹¤.
- ëŒ€í™” ì‹œê°„ì´ ì§€ë‚ ìˆ˜ë¡ ê¸°ëŠ¥ ì œí•œì´ í’€ë¦¬ê³  3ì¼ í›„ í”„ë¡œí•„ êµí™˜ì— ì„±ê³µí•  ì‹œ ìƒëŒ€ë°©ê³¼ ì¶”ê°€ì ìœ¼ë¡œ ëŒ€í™”í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.

> ì–´ë‘ ì†ì˜ ì¹´í˜ ê°€ë³´ì…¨ë‚˜ìš”? ë§ì€ í¸ ìƒëŒ€ì˜ ì–¼êµ´ë„ ë‚˜ì´ë„ ì•Œ ìˆœ ì—†ì§€ë§Œ ê·¸ì € ëŒ€í™”í•©ë‹ˆë‹¤. ë¸”ë¼ì¸ë“œ ì¹´í˜ì—ì„œ 3ì¼ê°„ì˜ ëŒ€í™”ë§Œìœ¼ë¡œ ì„¤ë ˜ì„ ëŠë¼ê³  ë§ˆìŒì— ë“œëŠ” ìƒëŒ€ì—ê²Œë§Œ í”„ë¡œí•„ì„ ê³µê°œí•˜ì„¸ìš”.
> - ê´€ì‹¬ì‚¬ë¥¼ ê¸°ë°˜ìœ¼ë¡œ ìƒëŒ€ë°©ê³¼ ë§¤ì¹­ë˜ê³  ê·¸ ê´€ì‹¬ì‚¬ë¥¼ ê¸°ë°˜ìœ¼ë¡œ ë‹¤ì–‘í•œ ëŒ€í™” í† í”½ì´ ìƒì„±ë©ë‹ˆë‹¤.
> - ëŒ€í™” ì‹œê°„ì´ ì§€ë‚ ìˆ˜ë¡ ì‚¬ìš©í•  ìˆ˜ ìˆëŠ” ì±„íŒ…ë°© ë‚´ ê¸°ëŠ¥ ì œí•œì´ í•´ì œë©ë‹ˆë‹¤.
> - í”„ë¡œí•„ ê³µê°œëŠ” ì›í•˜ëŠ” ì‚¬ëŒì—ê²Œë§Œ 3ì¼ê°„ì˜ ëŒ€í™”ë¡œ ì¶©ë¶„íˆ ìƒëŒ€ë°©ì„ ì•Œì•„ê°”ì„ ë•Œ í”„ë¡œí•„ì„ ê³µê°œí•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.
> - 3ì¼ ê°„ì˜ ëŒ€í™”ê°€ ì¦ê±°ì› ê±°ë‚˜ ìƒëŒ€ë°©ì´ ë”ìš± ê¶ê¸ˆí•˜ë‹¤ë©´ ìì‹ ì˜ í”„ë¡œí•„ì„ ê³µê°œí•˜ê³  ìƒëŒ€ë°©ê³¼ í”„ë¡œí•„ì„ êµí™˜í•˜ì„¸ìš”. í”„ë¡œí•„ êµí™˜ì— ì„±ê³µí•˜ë©´ ì¶”ê°€ì ì¸ ëŒ€í™”ë¥¼ ì´ì–´ í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.
> - í”„ë¡œí•„ êµí™˜ì— ì„±ê³µí•  ê²½ìš° ì…ì¥ ì‹œ ì„ íƒí–ˆë˜ ìŒë£Œìˆ˜ì˜ ë±ƒì§€ë¥¼ íšë“í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.
> - ìƒëŒ€ë°©ê³¼ ì¸ì—°ì´ ì•„ë‹ˆë¼ê³  ìƒê°ì´ ë“œì‹œë‚˜ìš”? 'ê·¸ë§Œ ì—°ë½í•˜ê³  ì‹¶ì–´ìš”'ë€ ë§ì„ í•˜ì§€ ëª»í•´ ì• ë§¤í•˜ê²Œ ëŒ€í™”ë¥¼ ì´ì–´ê°„ ì  ìˆë‚˜ìš”? ì €í¬ ì¹´í˜ì—ì„œëŠ” ëŒ€í™”ë¥¼ ëë‚´ê³  ì‹¶ì€ ì´ìœ ë¥¼ ì„ íƒí•˜ê³  ë°©ì„ ë‚˜ê°€ê¸°ë§Œ í•˜ë©´ ë©ë‹ˆë‹¤.

<br>

## ğŸ›  ì‚¬ìš© ê¸°ìˆ 
### Application
- Java 11
- SpringBoot, Spring MVC, Spring Data JPA, Spring Security, Spring REST Docs
- WebSocket, STOMP, SockJS
- Thymeleaf

### Infrastructure
- MySQL
- Redis (Cache, Message Broker)
- Mongo DB
- AWS EC2, RDS, S3, CloudFront, ElastiCache
- Mongo DB Atlas
- Firebase Cloud Messaging
- Nginx

<br>

## ğŸ” êµ¬ì„±ë„
![blindcafe-architecture](https://github.com/Blind-Cafe/BlindCafe/blob/main/assets/server/blindcafe-architecture.png?raw=ture)

<br>

## ğŸ–¥ ê¸°ëŠ¥ ì„¤ëª…
### ì¸ì¦

<details>
<summary>Deatil</summary>
<div markdown="1">

- íšŒì›ê°€ì…/ë¡œê·¸ì¸
  - ì†Œì…œ ê³„ì • ì¸ì¦
  - FCM í† í° ê´€ë¦¬
  - ì¸ì¦ í† í° ë°œê¸‰

- í† í° ê°±ì‹ 

</div>
</details>

---

### ìœ ì €
<details>
<summary>Deatil</summary>
<div markdown="1">

- ìœ ì € ì •ë³´ ìˆ˜ì •
  - ë‚˜ì´, ì„±ë³„ (ì´ˆê¸° ì…ë ¥ í›„ ìˆ˜ì • ë¶ˆê°€)
  - í”„ë¡œí•„ ì´ë¯¸ì§€
  - ê´€ì‹¬ì‚¬
  - ìƒëŒ€ë°© ì„±ë³„
  - ëª©ì†Œë¦¬
  - ì§€ì—­
- ìœ ì € ì •ë³´ ì¡°íšŒ
  - í”„ë¡œí•„ ìƒì„¸ ì •ë³´ ì¡°íšŒ
  - í”„ë¡œí•„ ì´ë¯¸ì§€ ë¦¬ìŠ¤íŠ¸ ì¡°íšŒ
- íƒˆí‡´
- ê±´ì˜ì‚¬í•­ ì‘ì„±
  - Email ì—°ë™
- ì‹ ê³ 
- ì‹ ê³  ë‚´ì—­ ì¡°íšŒ

</div>
</details>

---

### ë§¤ì¹­
<details>
<summary>Deatil</summary>
<div markdown="1">

- ë§¤ì¹­ ìš”ì²­
- ë§¤ì¹­ ìš”ì²­ ì·¨ì†Œ
- ë§¤ì¹­ ë¦¬ìŠ¤íŠ¸ ì¡°íšŒ
- ë§¤ì¹­ ìƒì„¸ ì •ë³´ ì¡°íšŒ
- ìŒë£Œìˆ˜ ì„ íƒ
- í† í”½(ì¶”ì²œ ëŒ€í™” ì£¼ì œ) ì¡°íšŒ
- í”„ë¡œí•„ êµí™˜
- ë§¤ì¹­ ë‚˜ê°€ê¸°

</div>
</details>

### ì±„íŒ…
<details>
<summary>Deatil</summary>
<div markdown="1">

- ë©”ì‹œì§€ ìˆ˜ì‹ /ë°œì‹ 
  - í…ìŠ¤íŠ¸
  - ì‚¬ì§„
  - ìŒì„±
  - ë™ì˜ìƒ
- ë©”ì‹œì§€ ë‚´ì—­ ì¡°íšŒ

</div>
</details>

---

### ì•Œë¦¼
<details>
<summary>Deatil</summary>
<div markdown="1">

- í‘¸ì‹œ ì•Œë¦¼ ì „ì†¡
  - ì ‘ì† ìƒíƒœë¥¼ ê³ ë ¤í•´ì„œ ë¯¸ì ‘ì† ìœ ì €ì—ê²Œ ì•Œë¦¼ ì „ì†¡
- ì•Œë¦¼ ì„¤ì • ë³€ê²½
  - ì „ì²´ ì„¤ì •/í•´ì œ
  - ì±„íŒ…ë°© ë³„ ì„¤ì •/í•´ì œ

</div>
</details>

---

### ê³µì§€
<details>
<summary>Deatil</summary>
<div markdown="1">

- ê³µì§€ ì¡°íšŒ
  - ë§ˆì§€ë§‰ ê³µì§€ ì¡°íšŒ API ìš”ì²­ ì‹œê°„ì„ ë°”íƒ•ìœ¼ë¡œ ê³µì§€ ìˆ˜ì‹  ì—¬ë¶€ ì œê³µ

</div>
</details>

---


### ê´€ë¦¬ì
<details>
<summary>Deatil</summary>
<div markdown="1">

- ì‹¤ì‹œê°„/ì „ì²´ ì‚¬ìš©ì ìˆ˜ ì¡°íšŒ
- ì£¼ê°„ ì ‘ì†ì ìˆ˜ ë° ì ‘ì†ì ë¹„ìœ¨ ì¡°íšŒ
- ì „ì²´ ì‚¬ìš©ì ëª©ë¡ ì¡°íšŒ
- ì‹ ê³  ë‚´ì—­ ì¡°íšŒ
- ê±´ì˜ì‚¬í•­ ì¡°íšŒ
- íƒˆí‡´ / ë°© ë‚˜ê°€ê¸° ì‚¬ìœ  ì¡°íšŒ
- ê³µì§€ ì‘ì„±

</div>
</details>

---

### ë°°ì¹˜ ì‘ì—…
<details>
<summary>Deatil</summary>
<div markdown="1">

- 3ì¼ ì±„íŒ… í™•ì¸
  - ë§¤ì¹­ ì§€ì† ì‹œê°„ ë³„ ì±„íŒ…ë°© ë‚´ ê¸°ëŠ¥ í•´ì œ ë©”ì‹œì§€/ì•Œë¦¼ ì „ì†¡
  - ë§¤ì¹­ ìœ íš¨ ì‹œê°„ ì„ë°• ì‹œ ë©”ì‹œì§€/ì•Œë¦¼ ì „ì†¡
  - ë§¤ì¹­ ìœ íš¨ ì‹œê°„ ì´ˆê³¼ ì‹œ í”„ë¡œí•„ êµí™˜ í…œí”Œë¦¿ ë©”ì‹œì§€/ì•Œë¦¼ ì „ì†¡

- 7ì¼ ì±„íŒ… í™•ì¸
  - ë§¤ì¹­ ìœ íš¨ ì‹œê°„ ì„ë°• ì‹œ ë©”ì‹œì§€/ì•Œë¦¼ ì „ì†¡
  - ë§¤ì¹­ ìœ íš¨ ì‹œê°„ ì´ˆê³¼ ì‹œ ì±„íŒ…ë°© ë¹„í™œì„±í™”

- ë§¤ì¹­ ìš”ì²­ ìë™ ì·¨ì†Œ
  - ì˜¤ë˜ëœ ìš”ì²­ì— ëŒ€í•´ì„œ ë§¤ì¹­ ì·¨ì†Œ ë° ì†Œëª¨ëœ ë§¤ì¹­ê¶Œ ë³µêµ¬

- ë§¤ì¼ ë°¤ 12ì‹œ ë§¤ì¹­ê¶Œ ìˆ˜ ë¦¬ì…‹

- ë§¤ì¼ ìƒˆë²½ ì „ì¼ í•˜ë£¨ë™ì•ˆ ì ‘ì†í•œ ì‚¬ìš©ì ìˆ˜ ë° ì ‘ì† ë¹„ìœ¨ ì €ì¥

</div>
</details>

<br>

## âš™ ë°°í¬

![CICD](https://github.com/Blind-Cafe/BlindCafe/blob/main/assets/server/blindcafe-cicd.png?raw=true)

### í™˜ê²½
- Gradle 7.x
- JDK 11

### ì¶”ê°€ ì„¤ì •
- `/src/main/resources`ì— ì•„ë˜ ì–‘ì‹ì„ ì´ìš©í•˜ì—¬ `application.yml`íŒŒì¼ì„ ì‘ì„±í•©ë‹ˆë‹¤.
    <details>
    <summary>Sample</summary>
    <div markdown="1">  

    ```yml
    spring:
      profiles:
        active: {ì ìš© í™˜ê²½}
    
    ---
    
    spring:
      profiles:
        group:
          "local": "local, common"
          "dev": "dev, common"
          "prod": "prod, common"
    
    ---
    
    spring:
      config:
        activate:
          on-profile: local
      datasource:
        driver-class-name: com.mysql.cj.jdbc.Driver
        url: {Local RDBMS(MySQL) URL}
        username: {Local RDBMS(MySQL) Username}
        password: {Local RDBMS(MySQL) ë¹„ë°€ë²ˆí˜¸}
      redis:
        host: {Local Redis URL}
        port: {Local Redis PORT}
      data:
        mongodb:
          uri: {Local Mongo DB URL}
    
    ---
  
    spring:
      config:
        activate:
          on-profile: dev
      datasource:
        driver-class-name: com.mysql.cj.jdbc.Driver
        url: {Dev RDBMS(MySQL) URL}
        username: {Dev RDBMS(MySQL) Username}
        password: {Dev RDBMS(MySQL) ë¹„ë°€ë²ˆí˜¸}
      redis:
        host: {Dev Redis URL}
        port: {Dev Redis PORT}
      data:
        mongodb:
          uri: {Dev Mongo DB URL}
    
    ---
    
    spring:
      config:
        activate:
          on-profile: prod
      datasource:
        driver-class-name: com.mysql.cj.jdbc.Driver
        url: {Prod RDBMS(MySQL) URL}
        username: {Prod RDBMS(MySQL) Username}
        password: {Prod RDBMS(MySQL) ë¹„ë°€ë²ˆí˜¸}
      redis:
        host: {Prod Redis URL}
        port: {Prod Redis PORT}
      data:
        mongodb:
          uri: {Prod Mongo DB URL}
    
    ---
    
    server:
      port: 8080
      tomcat:
        uri-encoding: UTF-8
    
    spring:
      config:
        activate:
          on-profile: common
      mvc:
        static-path-pattern: /static/**
      jpa:
        database: mysql
        database-platform: org.hibernate.dialect.MySQL5InnoDBDialect
        generate-ddl: true
      servlet:
        multipart:
          max-file-size: 10MB
      mail:
        host: smtp.gmail.com
        port: 587
        username: {Gmail SMTP ì´ìš©í•  ê³„ì •ì˜ ì´ë©”ì¼ ì£¼ì†Œ}
        password: {Gmail SMTP ì´ìš©í•  ê³„ì •ì˜ ì´ë©”ì¼ì˜ ë¹„ë°€ë²ˆí˜¸}
        properties:
          mail:
            smtp:
              starttls:
                enable: true
                required: true
              auth: true
      thymeleaf:
        cache: false
    
    cloud:
      aws:
        credentials:
          accessKey: {AWS Credential Access Key}
          secretKey: {AWS Credential Secret Key}
        s3:
          bucket: {AWS S3 Bucket ì´ë¦„}
        region:
          static: ap-northeast-2
        cloudfront:
          url: {AWS CloudFront URL}
        stack:
          auto: false
    
    email:
      from: {ê±´ì˜ì‚¬í•­ ë°œì‹  ì´ë©”ì¼ ì£¼ì†Œ}
      to: {ê±´ì˜ì‚¬í•­ ìˆ˜ì‹  ì´ë©”ì¼ ì£¼ì†Œ}
    
    fcm:
      key: {Firebase Key(json) íŒŒì¼ ê²½ë¡œ}
      auth: https://www.googleapis.com/auth/cloud-platform
      api: {FCM Send API URL}
      firebase-create-scoped: https://www.googleapis.com/auth/firebase.messaging
      firebase-multicast-message-size: 450
    
    secret:
      key1: {JWT ì‹œê·¸ë‹ˆì²˜ 1}
      key2: {JWT ì‹œê·¸ë‹ˆì²˜ 2}
      key3: {JWT ì‹œê·¸ë‹ˆì²˜ 3}
      sample-token: {Security í•„í„° ì ìš© í›„ í…ŒìŠ¤íŠ¸í•  ê²½ìš° Access token}
  
    admin:
      id: {ê´€ë¦¬ì ê³„ì • ID}
      pw: {ê´€ë¦¬ì ê³„ì • ë¹„ë°€ë²ˆí˜¸}
    ```
</div>
</details>

- `/src/main/resources/firebase`ì— Firebase Key íŒŒì¼ `blind-cafe-firebase-key.json`ì„ ì¶”ê°€í•©ë‹ˆë‹¤.

<br>

## ğŸ’¾ ê²°ê³¼ë¬¼
### API
- [API ëª…ì„¸ì„œ](https://www.blindcafe.me/docs)

### ERD
![ERD](https://github.com/Blind-Cafe/BlindCafe/blob/main/assets/server/blindcafe-erd.png?raw=true)

<br>

### ê´€ë¦¬ì í™”ë©´
![admin-page](https://user-images.githubusercontent.com/59307414/161480294-baf55cb8-8afa-48c4-82fd-e83f644f99ad.png)

<br>

## ğŸ”— ê´€ë ¨
### Team
|Position|Name|Repository|
|:---:|:---:|---|
|Planner|ì´í˜œì§€||
|Designer|ê¹€ë‹¤ì€||
|Server|[ê¹€í¬ë™](https://sulky-branch-08e.notion.site/Heedong-Kim-f0962ce4ba2947f68ffb3c3815846f80)|https://github.com/Blind-Cafe/BlindCafe-Server|
|AOS|[ë…¸ì†Œë˜](https://github.com/nosorae)|https://github.com/Blind-Cafe/BlindCafe-AOS|
|iOS|[ê¶Œí•˜ì€](https://github.com/eilyri)|https://github.com/Blind-Cafe/BlindCafe-iOS|
